sudo: required
dist: xenial
language: go
go:
  - 1.5

cache:
  directories:
    - node_modules

before_install:

install:
  - sudo apt remove -y chromium-browser
  - sudo apt-get install -y  google-chrome-stable snapd
  - ls -alt $HOME/.ssh

before_script:
  - ifconfig
  - snap list
  - snap install snapweb
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

script:
  - cd tests
  - ./run-tests.sh snapweb localhost 8022

